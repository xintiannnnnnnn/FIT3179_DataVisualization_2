{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {"url": "https://raw.githubusercontent.com/xintiannnnnnnn/FIT3179_DataVisualization_2/refs/heads/main/data/internet_bandwidth.json"},
  "transform": [
    {"filter": "year(datum.year) >= 2020 && year(datum.year) <= 2023"}
  ],
  "vconcat": [
    {
      "width": 800,
      "height": 260,
      "mark": {"type": "area", "interpolate": "monotone", "opacity": 1.0},
      "title": "Global Internet Bandwidth Consumption by Content Type (2020â€“2023)",
      "encoding": {
        "x": {
          "field": "year",
          "type": "ordinal",
          "scale": {"domain": {"param": "brush"}, "padding": 0},
          "axis": {"title": "Year", "labelAngle": 0}
        },
        "y": {
          "aggregate": "sum",
          "field": "bandwidth_exabytes",
          "stack": "zero",
          "axis": {"title": "Bandwidth Usage (Exabytes/month)"}
        },
        "color": {
          "field": "category",
          "type": "nominal",
          "title": "Content Type",
          "scale": {
            "domain": ["Video Streaming", "Gaming", "Social Media", "Web Browsing", "File Sharing"],
            "range": ["#e41a1c", "#984ea3", "#ff7f00", "#a6cee3", "#377eb8"]
          },
          "legend": {"orient": "right", "title": "Content Type"}
        },
        "tooltip": [
          {"field": "category", "type": "nominal", "title": "Content Type"},
          {"aggregate": "sum", "field": "bandwidth_exabytes", "type": "quantitative", "title": "Bandwidth (EB/month)"},
          {"field": "year", "type": "ordinal", "title": "Year"}
        ]
      }
    },
    {
      "width": 800,
      "height": 30,
      "mark": {
        "type": "text",
        "align": "center",
        "baseline": "middle",
        "fontSize": 18,
        "text": "Use this line chart to filter out the data based on time"
      }
    
    },
    {
      "width": 800,
      "height": 80,
      "mark": {"type": "line", "color": "#7A7978"},
      "params": [
        {"name": "brush", "select": {"type": "interval", "encodings": ["x"]}}
      ],
      "encoding": {
        "x": {"field": "year", "type": "ordinal", "scale": {"padding": 0}, "axis": {"title": null, "labelAngle": 0}},
        "y": {
          "aggregate": "sum",
          "field": "bandwidth_exabytes",
          "axis": {"grid": false, "title": "Total Bandwidth"}
        }
      }
    }
  ]
}